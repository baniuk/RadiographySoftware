chdir('C:\\');
% using Niblack thresholding
a = imread('TestSample_2_3.tif');

handle = imshow('original',a,0);

out_med = median(a,0,51,51);

out_sub = imsub(a,out_med);
out_ith = nth(out_sub,41,-0.9);
out_med1 = median(out_ith,0,5,5);

handle1 = imshow('nth',out_med1,1);