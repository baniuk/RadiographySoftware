chdir('C:\\addip\\radiograms');
% read the image
cut = imread('TestSample_2_3.tif');
% and display it on the screen (without scaling)
handle1 = imshow('original',cut,0);
% median filtering
med = fastmedian(cut,0,51,51);
% substracting filtered image from original image
sub = imsub(cut,med);
% iterative thresholding
th = ith(sub,0.8);
% removing small dots
out_med = fastmedian(th,0,11,11);
handle2 = imshow('ith',out_med,1);
% recognizing flaws
indexed_image = index(out_med);
[num, tab] = calcfeat(cut,indexed_image,out_med,3,100000);
savefeat(tab,num,'features.txt');
im_f = genindexedimg(cut,out_med,tab,num,1);
% displaying result
handle3 = imshow('ith',out_med,1);
handle4 = imshow('numbered',im_f,1);
% performing classification process (requires ANNcls.dll)
[out,disc] = ANNcls(tab,'ffnet_round_elong_Sofia_NN_classifier_6_5_2.ann',num);
% writing results to file
matrixwrite(out,'outvector.txt');
matrixwrite(disc,'outvectorDisc.txt');